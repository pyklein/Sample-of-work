<?php
/**
 * Description of modifierExploitationAction
 *
 * @author William
 */
class modifierExploitationAction extends gridAction {

  public function preExecute() {
    if ($this->getRequest()->hasParameter('dossier_bpi')) {
      $this->strId = $this->getRequestParameter('dossier_bpi');
    } else {
      $this->getUser()->setFlash('warning', libelle('msg_credentials_acces_non_autorise'));
      $this->redirect('dossier_bpi/listerDossier_bpis');
    }
  }

  public function execute($request) {
    if (!$objDossier = Dossier_bpiTable::getInstance()->findOneById($this->strId)){
      $this->getUser()->setFlash('warning', libelle('msg_credentials_acces_non_autorise'));
      $this->redirect('dossier_bpi/listerDossier_bpis');
    }

    $this->objForm = new Exploitation_bpiForm($objDossier->getExploitation_bpi());

    if ($request->isMethod('post')){
      $this->processForm('modifer',null,false);
    }
  }

}

?>
