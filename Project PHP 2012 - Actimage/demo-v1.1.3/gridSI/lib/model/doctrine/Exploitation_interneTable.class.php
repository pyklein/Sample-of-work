<?php

/**
 * Exploitation_interneTable
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 */
class Exploitation_interneTable extends Doctrine_Table
{
    /**
     * Returns an instance of this class.
     *
     * @return object Exploitation_interneTable
     */
    public static function getInstance()
    {
        return Doctrine_Core::getTable('Exploitation_interne');
    }

    public function getExploitationInterneParDossierParInventeur($intDossierBpiId,$intInventeurId)
    {
      $objRequete = $this->createQuery('e')
                       ->leftJoin("e.Part_inventive p ON e.part_inventive_id = p.id")
                       ->where("p.dossier_bpi_id = ?", $intDossierBpiId)
                       ->andWhere("p.inventeur_id = ?", $intInventeurId)
                       ->orderBy("e.id");

      return $objRequete->execute();

    }

    public function getExploitationInterneParDossier($intDossierBpiId)
    {
      $objRequete = $this->createQuery('e')
                       ->leftJoin("e.Part_inventive p ON e.part_inventive_id = p.id")
                       ->where("p.dossier_bpi_id = ?", $intDossierBpiId)
                       ->orderBy("e.id");

      return $objRequete->count();

    }
}