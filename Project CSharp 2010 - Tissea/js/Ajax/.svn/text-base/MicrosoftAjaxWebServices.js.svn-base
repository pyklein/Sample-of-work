(function(){var a=null;function b(){var c="callback",b="undefined";Type._registerScript("MicrosoftAjaxWebServices.js",["MicrosoftAjaxNetwork.js"]);Type.registerNamespace("AjaxSys.Net");AjaxSys.Net.WebServiceProxy=function(){};AjaxSys.Net.WebServiceProxy.prototype={get_timeout:function(){return this._timeout||0},set_timeout:function(a){this._timeout=a},get_defaultUserContext:function(){return typeof this._userContext===b?a:this._userContext},set_defaultUserContext:function(a){this._userContext=a},get_defaultSucceededCallback:function(){return this._succeeded||a},set_defaultSucceededCallback:function(a){this._succeeded=a},get_defaultFailedCallback:function(){return this._failed||a},set_defaultFailedCallback:function(a){this._failed=a},get_enableJsonp:function(){return !!this._jsonp},set_enableJsonp:function(a){this._jsonp=a},get_path:function(){return this._path||a},set_path:function(a){this._path=a},get_jsonpCallbackParameter:function(){return this._callbackParameter||c},set_jsonpCallbackParameter:function(a){this._callbackParameter=a},_invoke:function(g,h,j,i,f,e,d){var c=this;f=f||c.get_defaultSucceededCallback();e=e||c.get_defaultFailedCallback();if(d===a||typeof d===b)d=c.get_defaultUserContext();return AjaxSys.Net.WebServiceProxy.invoke(g,h,j,i,f,e,d,c.get_timeout(),c.get_enableJsonp(),c.get_jsonpCallbackParameter())}};AjaxSys.Net.WebServiceProxy.registerClass("AjaxSys.Net.WebServiceProxy");AjaxSys.Net.WebServiceProxy.invoke=function(u,e,q,p,o,f,l,j,z,t){var h="Content-Type",d=false,n=z!==d?AjaxSys.Net.WebServiceProxy._xdomain.exec(u):a,g,r=n&&n.length===3&&(n[1]!==location.protocol||n[2]!==location.host);q=r||q;if(r){t=t||c;g="_jsonp"+AjaxSys._jsonp++}if(!p)p={};var v=p;if(!q||!v)v={};var m,k=a,s=a,x=AjaxSys.Net.WebRequest._createUrl(e?u+"/"+encodeURIComponent(e):u,v,r?t+"=AjaxSys."+g:a);if(r){function y(){if(k===a)return;k=a;m=new AjaxSys.Net.WebServiceError(true,String.format(AjaxSys.Res.webServiceTimedOut,e));delete AjaxSys[g];if(f)f(m,l,e)}function w(c,h){if(k!==a){window.clearTimeout(k);k=a}delete AjaxSys[g];g=a;if(typeof h!==b&&h!==200){if(f){m=new AjaxSys.Net.WebServiceError(d,c.Message||String.format(AjaxSys.Res.webServiceFailedNoMsg,e),c.StackTrace||a,c.ExceptionType||a,c);m._statusCode=h;f(m,l,e)}}else if(o)o(c,l,e)}AjaxSys[g]=w;j=j||AjaxSys.Net.WebRequestManager.get_defaultTimeout();if(j>0)k=window.setTimeout(y,j);AjaxSys.loader._loadSrc(x,function(){if(g)w({Message:String.format(AjaxSys.Res.webServiceFailedNoMsg,e)},-1)},true);return a}var i=new AjaxSys.Net.WebRequest;i.set_url(x);i.get_headers()[h]="application/json; charset=utf-8";if(!q){s=AjaxSys.Serialization.JavaScriptSerializer.serialize(p);if(s==="{}")s=""}i.set_body(s);i.add_completed(A);if(j&&j>0)i.set_timeout(j);i.invoke();function A(i){var g="application/json";if(i.get_responseAvailable()){var r,k=i.get_statusCode(),c=a;try{var j=i.getResponseHeader(h);c=j.startsWith(g)?i.get_object():j.startsWith("text/xml")?i.get_xml():i.get_responseData()}catch(r){}var p=i.getResponseHeader("jsonerror"),m=p==="true";if(m){if(c)c=new AjaxSys.Net.WebServiceError(d,c.Message,c.StackTrace,c.ExceptionType,c)}else if(j.startsWith(g))c=!c||typeof c.d===b?c:c.d;if(k<200||k>=300||m){if(f){if(!c||!m)c=new AjaxSys.Net.WebServiceError(d,String.format(AjaxSys.Res.webServiceFailedNoMsg,e));c._statusCode=k;f(c,l,e)}}else if(o)o(c,l,e)}else{var n=i.get_timedOut(),q=String.format(n?AjaxSys.Res.webServiceTimedOut:AjaxSys.Res.webServiceFailedNoMsg,e);if(f)f(new AjaxSys.Net.WebServiceError(n,q,"",""),l,e)}}return i};AjaxSys.Net.WebServiceProxy._generateTypedConstructor=function(a){return function(b){if(b)for(var c in b)this[c]=b[c];this.__type=a}};AjaxSys._jsonp=0;AjaxSys.Net.WebServiceProxy._xdomain=/^\s*([a-zA-Z0-9\+\-\.]+\:)\/\/([^?#\/]+)/;AjaxSys.Net.WebServiceError=function(e,f,d,b,c){var a=this;a._timedOut=e;a._message=f;a._stackTrace=d;a._exceptionType=b;a._errorObject=c;a._statusCode=-1};AjaxSys.Net.WebServiceError.prototype={get_timedOut:function(){return this._timedOut},get_statusCode:function(){return this._statusCode},get_message:function(){return this._message},get_stackTrace:function(){return this._stackTrace||""},get_exceptionType:function(){return this._exceptionType||""},get_errorObject:function(){return this._errorObject||a}};AjaxSys.Net.WebServiceError.registerClass("AjaxSys.Net.WebServiceError")}if(window.AjaxSys&&AjaxSys.loader)AjaxSys.loader.registerScript("WebServices",a,b);else b()})();
